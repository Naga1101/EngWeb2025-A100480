extends layout

block content
    .w3-card-4
        header.w3-container.w3-light-teal
            h2 Adicionar Estudante

        a.w3-button.w3-gray(href="/alunos") Voltar

        form.w3-container(method="POST")
            fieldset.w3-margin-bottom
                legend.w3-text-teal
                    b Dados do Estudante
                label
                    b ID
                input.w3-input.w3-border.w3-round(type="text" name="id" required pattern="^(A|PG).*" title="O ID deve come√ßar com 'A' ou 'PG'.")
                label
                    b Nome
                input.w3-input.w3-border.w3-round(type="text" name="nome" required)
                label
                    b Link do Github
                input.w3-input.w3-border.w3-round(type="text" name="github" required)

            fieldset.w3-margin-bottom
                legend.w3-text-teal
                    b Trabalhos de Casa (TPCs)
                .w3-row-padding
                    .w3-half
                        input.w3-check(type="checkbox" name="tpc1" value="1")
                        label TPC1
                        br
                        input.w3-check(type="checkbox" name="tpc2" value="1")
                        label TPC2
                        br
                        input.w3-check(type="checkbox" name="tpc3" value="1")
                        label TPC3
                        br
                        input.w3-check(type="checkbox" name="tpc4" value="1")
                        label TPC4
                    .w3-half
                        input.w3-check(type="checkbox" name="tpc5" value="1")
                        label TPC5
                        br
                        input.w3-check(type="checkbox" name="tpc6" value="1")
                        label TPC6
                        br
                        input.w3-check(type="checkbox" name="tpc7" value="1")
                        label TPC7
                        br
                        input.w3-check(type="checkbox" name="tpc8" value="1")
                        label TPC8

            .w3-center
                button.w3-btn.w3-teal.w3-round.w3-large.w3-margin-top(type="submit") Registar

    script.
        document.getElementById('adicionarEstudante').addEventListener('submit', function(event) {
            event.preventDefault();

            for (let i = 1; i <= 8; i++) {
                const checkbox = document.querySelector(`input[name="tpc${i}"]`);
                if (!checkbox.checked) {
                    const hiddenInput = document.createElement('input');
                    hiddenInput.type = 'hidden';
                    hiddenInput.name = `tpc${i}`;
                    hiddenInput.value = '0';
                    this.appendChild(hiddenInput);
                }
            }

            this.submit();
        });